<script>
	import { sha256 } from 'js-sha256';

	const CORRECT_HASH = '3865e98e8d3fe3316c6b8cb24219bf0847bdd11b9f9b1940dda302111134c297';
	const encoded = 'amZkaWplLmh0bWw=';

	let code = '';

	function check() {
		if (!code.trim()) return;

		const hash = sha256(code.trim());

		if (hash === CORRECT_HASH) {
			const url = atob(encoded);
			window.location.href = url;
		}
	}

	// Opcjonalnie – wejście po naciśnięciu Enter
	function handleKeydown(event) {
		if (event.key === 'Enter') {
			check();
		}
	}
</script>

<main>
	<input
		type="text"
		placeholder="ㅤ"
		autocomplete="off"
		bind:value={code}
		on:keydown={handleKeydown}
	/>

	<button on:click={check}>?</button>
</main>

<style>
	:global(body) {
		margin: 0;
		height: 100vh;
		background: #000;
		color: #eee;
		font-family: sans-serif;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		gap: 25px;
	}

	input {
		padding: 12px;
		font-size: 20px;
		width: 220px;
		text-align: center;
		background: #111;
		color: #eee;
		border: 1px solid #444;
		border-radius: 6px;
	}

	button {
		padding: 12px 36px;
		font-size: 18px;
		background: #222;
		color: #eee;
		border: 1px solid #555;
		border-radius: 6px;
		cursor: pointer;
	}

	button:hover {
		background: #333;
	}
</style>
